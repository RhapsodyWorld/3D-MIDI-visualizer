<!DOCTYPE html>
<html>
<head>
	<title>3D visualization</title>
	<link href="css/reset.css" type="text/css" rel="stylesheet">
	<link href="css/style.css" type="text/css" rel="stylesheet">
</head>
<body>

<div id="container"></div>

<script src="js/three.min.js"></script>
<script src="js/midi/stream.js"></script>
<script src="js/midi/midifile.js"></script>
<script src="js/midi/midiloader.js"></script>
<script src="js/class.note.js"></script>
<script src="js/class.animator.js"></script>
<script>

var midiObject = new MidiLoader().load('midi/test2.mid');
var animator;

function addNote() {
	var note = new Note();
	animator.onNoteAdded(note);
}

window.onMidiLoaded = function() {
	console.log('Tracks: ', midiObject.getTracks());
	console.log('Ticks per beat: ', midiObject.getTicksPerBeat());
	console.log('BPM: ', midiObject.getBPM());

	animator = new Animator().init();
	addNote();
	animate(0);
}

function animate(time) {
	// Request to be called again for next frame
	requestAnimationFrame(animate);
	animator.render(time);
}

</script>

</body>
</html>
